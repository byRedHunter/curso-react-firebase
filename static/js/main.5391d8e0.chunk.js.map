{"version":3,"sources":["components/Uploader/DragImage.jsx","services/firebase.js","hooks/useStorage.js","components/Uploader/LoaderImage.jsx","components/Uploader/Uploader.jsx","hooks/useFirestore.js","components/Slider/Image.jsx","components/Slider/Loader.jsx","components/Slider/Slider.jsx","App.js","index.js"],"names":["DragImage","setMedia","setLoading","useState","error","setError","messageError","setMessageError","classDrag","setClassDrag","image","setImage","file","setFile","typeImages","refInputFile","useRef","isImageValid","includes","type","showImage","fileReader","FileReader","readAsDataURL","addEventListener","e","target","result","useEffect","setTimeout","className","name","ref","onChange","files","onDragOver","preventDefault","onDragLeave","onClick","current","click","onDrop","dataTransfer","src","alt","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","fbStorage","storage","fbFirestore","firestore","timeStamp","FieldValue","serverTimestamp","useStorage","progress","setProgress","url","setUrl","storageRef","collectionRef","collection","put","on","snap","percentage","bytesTransferred","totalBytes","err","a","getDownloadURL","createdAt","add","LoaderImage","div","initial","width","animate","Uploader","loading","useFirestore","docs","setDocs","unsub","orderBy","onSnapshot","documents","forEach","doc","push","data","id","Image","Loader","Slider","images","setImages","sliderActive","setSliderActive","undefined","amountSlider","setAmountSlider","map","length","pos","App","ReactDOM","render","document","querySelector"],"mappings":"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","file":"static/js/main.5391d8e0.chunk.js","sourcesContent":["import React, { useState, useRef, useEffect } from 'react'\r\n\r\nimport './DragImage.scss'\r\n\r\nconst DragImage = ({ setMedia, setLoading }) => {\r\n\tconst [error, setError] = useState(false)\r\n\tconst [messageError, setMessageError] = useState('')\r\n\tconst [classDrag, setClassDrag] = useState('drag__image')\r\n\tconst [image, setImage] = useState(null)\r\n\tconst [file, setFile] = useState(null)\r\n\r\n\tconst typeImages = ['image/png', 'image/jpeg', 'image/jpg']\r\n\r\n\tconst refInputFile = useRef(null)\r\n\r\n\tconst selectImage = () => {\r\n\t\trefInputFile.current.click()\r\n\t}\r\n\r\n\tconst isImageValid = (file) => {\r\n\t\tif (file && typeImages.includes(file.type)) {\r\n\t\t\tsetError(false)\r\n\t\t\treturn true\r\n\t\t} else {\r\n\t\t\tsetError(true)\r\n\t\t\tsetMessageError('File is incorrect')\r\n\t\t\tsetImage('')\r\n\t\t\treturn false\r\n\t\t}\r\n\t}\r\n\r\n\tconst showImage = (file) => {\r\n\t\tconst fileReader = new FileReader()\r\n\t\tfileReader.readAsDataURL(file)\r\n\r\n\t\tfileReader.addEventListener('load', (e) => {\r\n\t\t\tsetImage(e.target.result)\r\n\t\t})\r\n\t\tsetFile(file)\r\n\t\t/* guardamos el archivo para pasarlo a su padre */\r\n\t\tsetMedia(file)\r\n\t}\r\n\r\n\tconst addImage = (e) => {\r\n\t\te.preventDefault()\r\n\r\n\t\trefInputFile.current.files = e.dataTransfer.files\r\n\t\tconst file = refInputFile.current.files[0]\r\n\r\n\t\tshowImage(file)\r\n\t}\r\n\r\n\tconst uploadImage = (e) => {\r\n\t\tconst files = e.target.files\r\n\t\tconst file = files[0]\r\n\r\n\t\tconst valid = isImageValid(file)\r\n\r\n\t\tif (valid) {\r\n\t\t\tshowImage(file)\r\n\t\t} else {\r\n\t\t\tsetFile(null)\r\n\t\t}\r\n\t}\r\n\r\n\tconst handleSave = () => {\r\n\t\tconst valid = isImageValid(file)\r\n\r\n\t\tif (valid && file) {\r\n\t\t\tsetLoading(true)\r\n\t\t} else {\r\n\t\t\tsetError(true)\r\n\t\t\tsetMessageError('Firt, upload an image.')\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tsetTimeout(() => {\r\n\t\t\tsetError(false)\r\n\t\t}, 5000)\r\n\t}, [error])\r\n\r\n\treturn (\r\n\t\t<div className='drag'>\r\n\t\t\t<h2 className='drag__title'>Uploader your Image</h2>\r\n\r\n\t\t\t<div className='drag__info'>Fire should be Jpeg, Png...</div>\r\n\r\n\t\t\t{error && <div className='drag__message'>{messageError}</div>}\r\n\r\n\t\t\t<input\r\n\t\t\t\ttype='file'\r\n\t\t\t\tname='file'\r\n\t\t\t\tref={refInputFile}\r\n\t\t\t\tonChange={uploadImage}\r\n\t\t\t/>\r\n\t\t\t<div\r\n\t\t\t\tclassName={classDrag}\r\n\t\t\t\tonDragOver={(e) => {\r\n\t\t\t\t\te.preventDefault()\r\n\t\t\t\t\tsetClassDrag('drag__image active')\r\n\t\t\t\t}}\r\n\t\t\t\tonDragLeave={(e) => {\r\n\t\t\t\t\te.preventDefault()\r\n\t\t\t\t\tsetClassDrag('drag__image')\r\n\t\t\t\t}}\r\n\t\t\t\tonClick={selectImage}\r\n\t\t\t\tonDrop={addImage}\r\n\t\t\t>\r\n\t\t\t\t<img src={image} alt='' className='drag__image--preview' />\r\n\t\t\t\t<span className='drag__image--message'>\r\n\t\t\t\t\tClic or Drag & Drop your image here.\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\r\n\t\t\t<button className='drag__action' onClick={handleSave}>\r\n\t\t\t\tSave Image\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default DragImage\r\n","import firebase from 'firebase/app'\r\nimport 'firebase/storage'\r\nimport 'firebase/firestore'\r\n\r\n// Your web app's Firebase configuration\r\nvar firebaseConfig = {\r\n\tapiKey: 'AIzaSyA7GZlI1buhvfZcGiVJSEDdISvY3WyDYR4',\r\n\tauthDomain: 'slider-react-65431.firebaseapp.com',\r\n\tdatabaseURL: 'https://slider-react-65431.firebaseio.com',\r\n\tprojectId: 'slider-react-65431',\r\n\tstorageBucket: 'slider-react-65431.appspot.com',\r\n\tmessagingSenderId: '665974285349',\r\n\tappId: '1:665974285349:web:700b909e760f2366da4bcc',\r\n}\r\n// Initialize Firebase\r\nfirebase.initializeApp(firebaseConfig)\r\n\r\nconst fbStorage = firebase.storage()\r\nconst fbFirestore = firebase.firestore()\r\nconst timeStamp = firebase.firestore.FieldValue.serverTimestamp\r\n\r\nexport { fbStorage, fbFirestore, timeStamp }\r\n","import { useState, useEffect } from 'react'\r\nimport { fbStorage, fbFirestore, timeStamp } from '../services/firebase'\r\n\r\nconst useStorage = (file) => {\r\n\tconst [progress, setProgress] = useState(0)\r\n\tconst [error, setError] = useState(null)\r\n\tconst [url, setUrl] = useState(null)\r\n\r\n\tuseEffect(() => {\r\n\t\tconst storageRef = fbStorage.ref(file.name)\r\n\t\tconst collectionRef = fbFirestore.collection('images')\r\n\r\n\t\tstorageRef.put(file).on(\r\n\t\t\t'state_changed',\r\n\t\t\t(snap) => {\r\n\t\t\t\tlet percentage = (snap.bytesTransferred / snap.totalBytes) * 100\r\n\t\t\t\tsetProgress(percentage)\r\n\t\t\t},\r\n\t\t\t(err) => {\r\n\t\t\t\tsetError(err)\r\n\t\t\t},\r\n\t\t\tasync () => {\r\n\t\t\t\tconst url = await storageRef.getDownloadURL()\r\n\t\t\t\tconst createdAt = timeStamp()\r\n\t\t\t\tcollectionRef.add({ url, createdAt })\r\n\t\t\t\tsetUrl(url)\r\n\t\t\t}\r\n\t\t)\r\n\t}, [file])\r\n\r\n\treturn { progress, url, error }\r\n}\r\n\r\nexport default useStorage\r\n","import React, { useEffect } from 'react'\r\nimport { motion } from 'framer-motion'\r\n\r\nimport useStorage from '../../hooks/useStorage'\r\n\r\nimport './LoaderImage.scss'\r\n\r\nconst LoaderImage = ({ file, setFile, setLoading }) => {\r\n\tconst { url, progress } = useStorage(file)\r\n\r\n\tuseEffect(() => {\r\n\t\tif (url) {\r\n\t\t\tsetFile(null)\r\n\t\t\tsetLoading(false)\r\n\t\t}\r\n\t}, [url, setFile, setLoading])\r\n\r\n\treturn (\r\n\t\t<div className='loader'>\r\n\t\t\t<h3 className='loader__title'>Uploading...</h3>\r\n\r\n\t\t\t<div className='loader__progress'>\r\n\t\t\t\t<motion.div\r\n\t\t\t\t\tinitial={{ width: 0 }}\r\n\t\t\t\t\tanimate={{ width: progress + '%' }}\r\n\t\t\t\t\tclassName='loader__progress--bar'\r\n\t\t\t\t></motion.div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default LoaderImage\r\n","import React, { useState } from 'react'\r\n\r\n// components\r\nimport DragImage from './DragImage'\r\nimport LoaderImage from './LoaderImage'\r\n\r\nimport './Uploader.scss'\r\n\r\nconst Uploader = () => {\r\n\tconst [loading, setLoading] = useState(false)\r\n\tconst [file, setFile] = useState(null)\r\n\r\n\treturn (\r\n\t\t<section className='uploader'>\r\n\t\t\t{loading ? (\r\n\t\t\t\t<LoaderImage file={file} setFile={setFile} setLoading={setLoading} />\r\n\t\t\t) : (\r\n\t\t\t\t<DragImage setMedia={setFile} setLoading={setLoading} />\r\n\t\t\t)}\r\n\t\t</section>\r\n\t)\r\n}\r\n\r\nexport default Uploader\r\n","import { useState, useEffect } from 'react'\r\nimport { fbFirestore } from '../services/firebase'\r\n\r\nconst useFirestore = (collection) => {\r\n\tconst [docs, setDocs] = useState([])\r\n\r\n\tuseEffect(() => {\r\n\t\tconst unsub = fbFirestore\r\n\t\t\t.collection(collection)\r\n\t\t\t.orderBy('createdAt', 'asc')\r\n\t\t\t.onSnapshot((snap) => {\r\n\t\t\t\tlet documents = []\r\n\r\n\t\t\t\tsnap.forEach((doc) => {\r\n\t\t\t\t\tdocuments.push({ ...doc.data(), id: doc.id })\r\n\t\t\t\t})\r\n\r\n\t\t\t\tsetDocs(documents)\r\n\t\t\t})\r\n\r\n\t\treturn () => unsub()\r\n\t}, [collection])\r\n\r\n\treturn { docs }\r\n}\r\n\r\nexport default useFirestore\r\n","import React from 'react'\r\n\r\nconst Image = ({ src }) => <img src={src} alt='Slider Item' />\r\n\r\nexport default Image\r\n","import React from 'react'\r\n\r\nimport './Loader.scss'\r\n\r\nconst Loader = () => {\r\n\treturn (\r\n\t\t<div className='spinner'>\r\n\t\t\t<div className='dot1'></div>\r\n\t\t\t<div className='dot2'></div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Loader\r\n","import React, { useEffect, useState } from 'react'\r\n\r\nimport './Slider.scss'\r\n\r\nimport useFirestore from '../../hooks/useFirestore'\r\n\r\n// components\r\nimport Image from './Image'\r\nimport Loader from './Loader'\r\n\r\nconst Slider = () => {\r\n\tconst { docs } = useFirestore('images')\r\n\tconst [images, setImages] = useState([])\r\n\tconst [sliderActive, setSliderActive] = useState(null)\r\n\tconst [amountSlider, setAmountSlider] = useState(undefined)\r\n\r\n\tuseEffect(() => {\r\n\t\tlet data = []\r\n\r\n\t\tdocs.map(({ url }) => data.push(url))\r\n\r\n\t\tsetImages(data)\r\n\t\tsetSliderActive(data.length - 1)\r\n\t\tsetAmountSlider(data.length - 1)\r\n\t}, [docs])\r\n\r\n\tconst goPrev = () => {\r\n\t\tlet pos = sliderActive\r\n\t\tif (pos === amountSlider) {\r\n\t\t\tpos = 0\r\n\t\t} else {\r\n\t\t\tpos += 1\r\n\t\t}\r\n\r\n\t\tsetSliderActive(pos)\r\n\t}\r\n\r\n\tconst goNext = () => {\r\n\t\tlet pos = sliderActive\r\n\t\tif (pos === 0) {\r\n\t\t\tpos = amountSlider\r\n\t\t} else {\r\n\t\t\tpos -= 1\r\n\t\t}\r\n\r\n\t\tsetSliderActive(pos)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<section className='slider'>\r\n\t\t\t<h2 className='slider__title'>Your Images</h2>\r\n\r\n\t\t\t<div className='controls'>\r\n\t\t\t\t<div className='controls__item' onClick={goPrev}>\r\n\t\t\t\t\t<i className='arrow prev'></i>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className='controls__item' onClick={goNext}>\r\n\t\t\t\t\t<i className='arrow next'></i>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div className='slider__container'>\r\n\t\t\t\t{amountSlider >= 0 ? <Image src={images[sliderActive]} /> : <Loader />}\r\n\t\t\t</div>\r\n\t\t</section>\r\n\t)\r\n}\r\n\r\nexport default Slider\r\n","import React from 'react'\r\n\r\nimport './App.scss'\r\n\r\n// components\r\nimport Uploader from './components/Uploader/Uploader'\r\nimport Slider from './components/Slider/Slider'\r\n\r\nconst App = () => {\r\n\treturn (\r\n\t\t<main className='main'>\r\n\t\t\t<div className='main__container'>\r\n\t\t\t\t<Uploader />\r\n\r\n\t\t\t\t<Slider />\r\n\t\t\t</div>\r\n\t\t</main>\r\n\t)\r\n}\r\n\r\nexport default App\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\n\r\nimport './index.scss'\r\n\r\nimport App from './App'\r\n\r\nReactDOM.render(<App />, document.querySelector('#root'))\r\n"],"sourceRoot":""}